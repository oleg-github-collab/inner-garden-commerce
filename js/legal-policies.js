/* Inner Garden - Legal Policies (Privacy, Terms, Cookies) */
(function() {
  'use strict';

  const policies = {
    privacy: {
      uk: {
        title: 'Політика Конфіденційності',
        date: 'Остання редакція: 06 жовтня 2025',
        content: `
          <h3>1. Збір інформації</h3>
          <p>Ми збираємо тільки ту інформацію, яку ви надаєте добровільно при заповненні форм на сайті:</p>
          <ul>
            <li>Ім'я та контактні дані (email, телефон)</li>
            <li>Інформацію про вашу компанію та потреби</li>
            <li>Дані про вибір мови та налаштування сайту</li>
          </ul>

          <h3>2. Використання інформації</h3>
          <p>Ваші дані використовуються виключно для:</p>
          <ul>
            <li>Відповіді на ваші запити та консультацій</li>
            <li>Покращення якості наших послуг</li>
            <li>Розсилки новин про нові роботи (тільки за вашою згодою)</li>
          </ul>

          <h3>3. Захист даних</h3>
          <p>Ми використовуємо сучасні технології шифрування та не передаємо ваші дані третім особам без вашої згоди.</p>

          <h3>4. Cookies</h3>
          <p>Ми використовуємо cookies тільки для:</p>
          <ul>
            <li>Збереження вибраної мови інтерфейсу</li>
            <li>Покращення роботи сайту</li>
          </ul>

          <h3>5. Ваші права</h3>
          <p>Ви маєте право:</p>
          <ul>
            <li>Запитувати копію ваших даних</li>
            <li>Вимагати видалення ваших даних</li>
            <li>Відмовитися від розсилки</li>
          </ul>

          <h3>6. Контакти</h3>
          <p>З питань конфіденційності звертайтеся: <strong>privacy@inner-garden.art</strong></p>
        `
      },
      en: {
        title: 'Privacy Policy',
        date: 'Last updated: October 6, 2025',
        content: `
          <h3>1. Information Collection</h3>
          <p>We collect only the information you voluntarily provide when filling out forms on our website:</p>
          <ul>
            <li>Name and contact details (email, phone)</li>
            <li>Information about your company and needs</li>
            <li>Language preferences and site settings</li>
          </ul>

          <h3>2. Use of Information</h3>
          <p>Your data is used exclusively for:</p>
          <ul>
            <li>Responding to your inquiries and consultations</li>
            <li>Improving the quality of our services</li>
            <li>Sending news about new artworks (only with your consent)</li>
          </ul>

          <h3>3. Data Protection</h3>
          <p>We use modern encryption technologies and do not share your data with third parties without your consent.</p>

          <h3>4. Cookies</h3>
          <p>We use cookies only for:</p>
          <ul>
            <li>Saving your selected interface language</li>
            <li>Improving website functionality</li>
          </ul>

          <h3>5. Your Rights</h3>
          <p>You have the right to:</p>
          <ul>
            <li>Request a copy of your data</li>
            <li>Request deletion of your data</li>
            <li>Unsubscribe from mailings</li>
          </ul>

          <h3>6. Contact</h3>
          <p>For privacy questions, contact: <strong>privacy@inner-garden.art</strong></p>
        `
      },
      de: {
        title: 'Datenschutzerklärung',
        date: 'Letzte Aktualisierung: 6. Oktober 2025',
        content: `
          <h3>1. Datenerfassung</h3>
          <p>Wir erfassen nur Informationen, die Sie freiwillig beim Ausfüllen von Formularen auf unserer Website angeben:</p>
          <ul>
            <li>Name und Kontaktdaten (E-Mail, Telefon)</li>
            <li>Informationen über Ihr Unternehmen und Ihre Bedürfnisse</li>
            <li>Sprachpräferenzen und Website-Einstellungen</li>
          </ul>

          <h3>2. Verwendung von Informationen</h3>
          <p>Ihre Daten werden ausschließlich verwendet für:</p>
          <ul>
            <li>Beantwortung Ihrer Anfragen und Beratungen</li>
            <li>Verbesserung der Qualität unserer Dienstleistungen</li>
            <li>Versand von Neuigkeiten über neue Kunstwerke (nur mit Ihrer Zustimmung)</li>
          </ul>

          <h3>3. Datenschutz</h3>
          <p>Wir verwenden moderne Verschlüsselungstechnologien und geben Ihre Daten nicht ohne Ihre Zustimmung an Dritte weiter.</p>

          <h3>4. Cookies</h3>
          <p>Wir verwenden Cookies nur für:</p>
          <ul>
            <li>Speichern Ihrer gewählten Schnittstellensprache</li>
            <li>Verbesserung der Website-Funktionalität</li>
          </ul>

          <h3>5. Ihre Rechte</h3>
          <p>Sie haben das Recht:</p>
          <ul>
            <li>Eine Kopie Ihrer Daten anzufordern</li>
            <li>Die Löschung Ihrer Daten zu verlangen</li>
            <li>Mailings abzubestellen</li>
          </ul>

          <h3>6. Kontakt</h3>
          <p>Bei Datenschutzfragen kontaktieren Sie: <strong>privacy@inner-garden.art</strong></p>
        `
      }
    },

    terms: {
      uk: {
        title: 'Умови Використання',
        date: 'Остання редакція: 06 жовтня 2025',
        content: `
          <h3>1. Загальні положення</h3>
          <p>Використовуючи цей сайт, ви погоджуєтеся з нашими умовами використання.</p>

          <h3>2. Авторські права</h3>
          <p>Всі зображення картин, тексти та дизайн сайту захищені авторським правом © Inner Garden 2024-2025.</p>

          <h3>3. Використання контенту</h3>
          <p>Забороняється:</p>
          <ul>
            <li>Копіювання зображень без письмового дозволу</li>
            <li>Комерційне використання матеріалів сайту</li>
            <li>Розповсюдження контенту без зазначення джерела</li>
          </ul>

          <h3>4. Замовлення картин</h3>
          <p>Умови продажу:</p>
          <ul>
            <li>Ціни вказані в USD та можуть змінюватися</li>
            <li>Доставка обговорюється індивідуально</li>
            <li>Оплата через безпечні платіжні системи</li>
          </ul>

          <h3>5. Відмова від відповідальності</h3>
          <p>AR-перегляд є демонстраційним і може відрізнятися від реального розміщення картини.</p>

          <h3>6. Зміни умов</h3>
          <p>Ми залишаємо за собою право змінювати умови використання без попереднього повідомлення.</p>

          <h3>7. Контакти</h3>
          <p>З питань використання звертайтеся: <strong>legal@inner-garden.art</strong></p>
        `
      },
      en: {
        title: 'Terms of Service',
        date: 'Last updated: October 6, 2025',
        content: `
          <h3>1. General Provisions</h3>
          <p>By using this website, you agree to our terms of service.</p>

          <h3>2. Copyright</h3>
          <p>All artwork images, texts, and website design are protected by copyright © Inner Garden 2024-2025.</p>

          <h3>3. Content Usage</h3>
          <p>Prohibited:</p>
          <ul>
            <li>Copying images without written permission</li>
            <li>Commercial use of site materials</li>
            <li>Distributing content without attribution</li>
          </ul>

          <h3>4. Ordering Artworks</h3>
          <p>Sales terms:</p>
          <ul>
            <li>Prices are in USD and subject to change</li>
            <li>Delivery is discussed individually</li>
            <li>Payment through secure payment systems</li>
          </ul>

          <h3>5. Disclaimer</h3>
          <p>AR preview is demonstrative and may differ from actual artwork placement.</p>

          <h3>6. Terms Changes</h3>
          <p>We reserve the right to change the terms of service without prior notice.</p>

          <h3>7. Contact</h3>
          <p>For usage questions, contact: <strong>legal@inner-garden.art</strong></p>
        `
      },
      de: {
        title: 'Nutzungsbedingungen',
        date: 'Letzte Aktualisierung: 6. Oktober 2025',
        content: `
          <h3>1. Allgemeine Bestimmungen</h3>
          <p>Durch die Nutzung dieser Website stimmen Sie unseren Nutzungsbedingungen zu.</p>

          <h3>2. Urheberrecht</h3>
          <p>Alle Kunstwerksbilder, Texte und das Website-Design sind urheberrechtlich geschützt © Inner Garden 2024-2025.</p>

          <h3>3. Nutzung von Inhalten</h3>
          <p>Verboten:</p>
          <ul>
            <li>Kopieren von Bildern ohne schriftliche Genehmigung</li>
            <li>Kommerzielle Nutzung von Website-Materialien</li>
            <li>Verbreitung von Inhalten ohne Quellenangabe</li>
          </ul>

          <h3>4. Bestellung von Kunstwerken</h3>
          <p>Verkaufsbedingungen:</p>
          <ul>
            <li>Preise sind in USD und können sich ändern</li>
            <li>Lieferung wird individuell besprochen</li>
            <li>Zahlung über sichere Zahlungssysteme</li>
          </ul>

          <h3>5. Haftungsausschluss</h3>
          <p>Die AR-Vorschau ist demonstrativ und kann von der tatsächlichen Platzierung des Kunstwerks abweichen.</p>

          <h3>6. Änderungen der Bedingungen</h3>
          <p>Wir behalten uns das Recht vor, die Nutzungsbedingungen ohne vorherige Ankündigung zu ändern.</p>

          <h3>7. Kontakt</h3>
          <p>Bei Nutzungsfragen kontaktieren Sie: <strong>legal@inner-garden.art</strong></p>
        `
      }
    },

    cookies: {
      uk: {
        title: 'Політика Cookies',
        date: 'Остання редакція: 06 жовтня 2025',
        content: `
          <h3>1. Що таке Cookies</h3>
          <p>Cookies - це невеликі текстові файли, які зберігаються на вашому пристрої при відвідуванні сайту.</p>

          <h3>2. Які Cookies ми використовуємо</h3>
          <p><strong>Необхідні cookies (завжди активні):</strong></p>
          <ul>
            <li><code>innerGarden_language</code> - зберігає вибрану мову</li>
            <li><code>preloader_shown</code> - запам'ятовує, що ви вже бачили прелоадер</li>
          </ul>

          <p><strong>Функціональні cookies (опційні):</strong></p>
          <ul>
            <li>Налаштування перегляду сайту</li>
            <li>Збереження ваших переваг</li>
          </ul>

          <h3>3. Аналітичні cookies</h3>
          <p>Ми НЕ використовуємо Google Analytics чи інші трекери без вашої згоди.</p>

          <h3>4. Керування cookies</h3>
          <p>Ви можете:</p>
          <ul>
            <li>Відключити cookies в налаштуваннях браузера</li>
            <li>Видалити cookies в будь-який час</li>
            <li>Використовувати сайт в режимі інкогніто</li>
          </ul>

          <h3>5. Cookies третіх сторін</h3>
          <p>Ми використовуємо:</p>
          <ul>
            <li>Google Fonts - для шрифтів</li>
            <li>Leaflet/OpenStreetMap - для інтерактивної карти</li>
          </ul>

          <h3>6. Термін зберігання</h3>
          <p>Наші cookies зберігаються до 1 року або до видалення вами.</p>

          <h3>7. Контакти</h3>
          <p>З питань cookies: <strong>privacy@inner-garden.art</strong></p>
        `
      },
      en: {
        title: 'Cookie Policy',
        date: 'Last updated: October 6, 2025',
        content: `
          <h3>1. What are Cookies</h3>
          <p>Cookies are small text files stored on your device when you visit our website.</p>

          <h3>2. Which Cookies We Use</h3>
          <p><strong>Necessary cookies (always active):</strong></p>
          <ul>
            <li><code>innerGarden_language</code> - stores your selected language</li>
            <li><code>preloader_shown</code> - remembers you've seen the preloader</li>
          </ul>

          <p><strong>Functional cookies (optional):</strong></p>
          <ul>
            <li>Site viewing preferences</li>
            <li>Saving your preferences</li>
          </ul>

          <h3>3. Analytics Cookies</h3>
          <p>We DO NOT use Google Analytics or other trackers without your consent.</p>

          <h3>4. Managing Cookies</h3>
          <p>You can:</p>
          <ul>
            <li>Disable cookies in browser settings</li>
            <li>Delete cookies at any time</li>
            <li>Use the site in incognito mode</li>
          </ul>

          <h3>5. Third-party Cookies</h3>
          <p>We use:</p>
          <ul>
            <li>Google Fonts - for typography</li>
            <li>Leaflet/OpenStreetMap - for interactive maps</li>
          </ul>

          <h3>6. Storage Period</h3>
          <p>Our cookies are stored for up to 1 year or until you delete them.</p>

          <h3>7. Contact</h3>
          <p>For cookie questions: <strong>privacy@inner-garden.art</strong></p>
        `
      },
      de: {
        title: 'Cookie-Richtlinie',
        date: 'Letzte Aktualisierung: 6. Oktober 2025',
        content: `
          <h3>1. Was sind Cookies</h3>
          <p>Cookies sind kleine Textdateien, die auf Ihrem Gerät gespeichert werden, wenn Sie unsere Website besuchen.</p>

          <h3>2. Welche Cookies wir verwenden</h3>
          <p><strong>Notwendige Cookies (immer aktiv):</strong></p>
          <ul>
            <li><code>innerGarden_language</code> - speichert Ihre gewählte Sprache</li>
            <li><code>preloader_shown</code> - merkt sich, dass Sie den Preloader gesehen haben</li>
          </ul>

          <p><strong>Funktionale Cookies (optional):</strong></p>
          <ul>
            <li>Einstellungen zur Website-Anzeige</li>
            <li>Speichern Ihrer Präferenzen</li>
          </ul>

          <h3>3. Analytische Cookies</h3>
          <p>Wir verwenden KEINE Google Analytics oder andere Tracker ohne Ihre Zustimmung.</p>

          <h3>4. Verwaltung von Cookies</h3>
          <p>Sie können:</p>
          <ul>
            <li>Cookies in den Browsereinstellungen deaktivieren</li>
            <li>Cookies jederzeit löschen</li>
            <li>Die Website im Inkognito-Modus nutzen</li>
          </ul>

          <h3>5. Cookies von Drittanbietern</h3>
          <p>Wir verwenden:</p>
          <ul>
            <li>Google Fonts - für Schriftarten</li>
            <li>Leaflet/OpenStreetMap - für interaktive Karten</li>
          </ul>

          <h3>6. Speicherdauer</h3>
          <p>Unsere Cookies werden bis zu 1 Jahr oder bis Sie sie löschen gespeichert.</p>

          <h3>7. Kontakt</h3>
          <p>Bei Cookie-Fragen: <strong>privacy@inner-garden.art</strong></p>
        `
      }
    }
  };

  class LegalPolicies {
    constructor() {
      this.currentLang = localStorage.getItem('innerGarden_language') || 'uk';
      this.init();
    }

    init() {
      // Listen for policy link clicks
      document.addEventListener('click', (e) => {
        const policyLink = e.target.closest('[data-policy]');
        if (policyLink) {
          e.preventDefault();
          const policyType = policyLink.dataset.policy;
          this.showPolicy(policyType);
        }
      });

      // Listen for language changes
      window.addEventListener('language:change', (e) => {
        this.currentLang = e.detail.lang;
      });
    }

    showPolicy(type) {
      if (!policies[type]) {
        console.error('Unknown policy type:', type);
        return;
      }

      const policy = policies[type][this.currentLang];

      const modal = document.createElement('div');
      modal.className = 'modal legal-modal open';
      modal.innerHTML = `
        <div class="modal-content legal-modal-content">
          <button class="modal-close legal-close">&times;</button>
          <div class="modal-header">
            <h2>${policy.title}</h2>
            <p class="legal-date">${policy.date}</p>
          </div>
          <div class="modal-body">
            <div class="legal-content">
              ${policy.content}
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary close-policy-btn">
              <i class="fas fa-check"></i>
              ${this.getCloseButtonText()}
            </button>
          </div>
        </div>
      `;

      document.body.appendChild(modal);
      document.body.classList.add('modal-open');

      // Close handlers
      const closeModal = () => {
        modal.classList.remove('open');
        document.body.classList.remove('modal-open');
        setTimeout(() => modal.remove(), 300);
      };

      modal.querySelector('.legal-close').addEventListener('click', closeModal);
      modal.querySelector('.close-policy-btn').addEventListener('click', closeModal);

      // Close on backdrop click
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          closeModal();
        }
      });

      // Close on Escape
      const escHandler = (e) => {
        if (e.key === 'Escape') {
          closeModal();
          document.removeEventListener('keydown', escHandler);
        }
      };
      document.addEventListener('keydown', escHandler);
    }

    getCloseButtonText() {
      const texts = {
        uk: 'Зрозуміло',
        en: 'Got it',
        de: 'Verstanden'
      };
      return texts[this.currentLang] || texts.uk;
    }
  }

  // Initialize on load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => new LegalPolicies());
  } else {
    new LegalPolicies();
  }

})();
