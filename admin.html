<!DOCTYPE html>
<html lang="uk" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Inner Garden Admin Panel">
  <title>Inner Garden — Admin</title>
  <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="css/admin.css">
</head>
<body>

  <!-- Login Screen -->
  <div class="login-screen" id="loginScreen">
    <div class="login-card">
      <div class="login-brand">
        <div class="login-logo">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
            <circle cx="20" cy="20" r="18" stroke="var(--accent)" stroke-width="2" fill="none"/>
            <path d="M20 8c0 12-8 16-8 24h16c0-8-8-12-8-24z" fill="var(--accent)" opacity="0.2"/>
            <path d="M20 12c0 8-5 11-5 18h10c0-7-5-10-5-18z" fill="var(--accent)" opacity="0.4"/>
          </svg>
        </div>
        <h1>Inner Garden</h1>
        <p class="login-subtitle">Art Gallery Administration</p>
      </div>
      <form id="loginForm" autocomplete="on">
        <div class="form-field">
          <label for="loginEmail">Email</label>
          <input type="email" id="loginEmail" name="email" required placeholder="admin@inner-garden.art" autocomplete="email">
        </div>
        <div class="form-field">
          <label for="loginPassword">Password</label>
          <input type="password" id="loginPassword" name="password" required placeholder="Enter password" autocomplete="current-password">
        </div>
        <button type="submit" class="btn btn-primary btn-full" id="loginBtn">
          <span>Sign In</span>
          <i class="fas fa-arrow-right"></i>
        </button>
      </form>
      <div class="login-footer">
        <kbd>Enter</kbd> to sign in
      </div>
    </div>
  </div>

  <!-- Main App Shell -->
  <div class="app-shell" id="appShell" style="display:none;">

    <!-- Sidebar (Desktop) -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-brand">
        <div class="sidebar-logo">
          <svg width="28" height="28" viewBox="0 0 40 40" fill="none">
            <circle cx="20" cy="20" r="18" stroke="var(--accent)" stroke-width="2.5" fill="none"/>
            <path d="M20 8c0 12-8 16-8 24h16c0-8-8-12-8-24z" fill="var(--accent)" opacity="0.3"/>
          </svg>
        </div>
        <span class="sidebar-title">Inner Garden</span>
        <span class="sidebar-badge">Admin</span>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item active" data-view="artworks">
          <i class="fas fa-palette"></i>
          <span>Artworks</span>
        </button>
        <button class="nav-item" data-view="cloudinary">
          <i class="fas fa-cloud"></i>
          <span>Media Library</span>
        </button>
        <button class="nav-item" data-view="bulk">
          <i class="fas fa-layer-group"></i>
          <span>Batch Edit</span>
          <span class="nav-badge" id="bulkNavBadge" style="display:none;">0</span>
        </button>
      </nav>

      <div class="sidebar-footer">
        <button class="nav-item" id="darkModeToggle">
          <i class="fas fa-moon"></i>
          <span>Dark Mode</span>
          <div class="toggle-switch" id="darkModeSwitch">
            <div class="toggle-knob"></div>
          </div>
        </button>
        <button class="nav-item" id="refreshBtn">
          <i class="fas fa-rotate"></i>
          <span>Refresh</span>
        </button>
        <button class="nav-item" id="logoutBtn">
          <i class="fas fa-sign-out-alt"></i>
          <span>Sign Out</span>
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Top Bar -->
      <header class="topbar">
        <button class="topbar-menu-btn" id="menuToggle">
          <i class="fas fa-bars"></i>
        </button>
        <div class="topbar-search">
          <i class="fas fa-search"></i>
          <input type="search" id="globalSearch" placeholder="Search artworks... (Ctrl+K)" autocomplete="off">
          <kbd class="search-kbd">Ctrl+K</kbd>
        </div>
        <div class="topbar-actions">
          <button class="btn btn-primary" id="newArtworkBtn">
            <i class="fas fa-plus"></i>
            <span>New Artwork</span>
          </button>
        </div>
      </header>

      <!-- Dashboard Stats -->
      <section class="stats-bar" id="statsBar">
        <div class="stat-card">
          <div class="stat-icon"><i class="fas fa-images"></i></div>
          <div class="stat-body">
            <span class="stat-value" id="statTotal">0</span>
            <span class="stat-label">Total</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon stat-icon--available"><i class="fas fa-check-circle"></i></div>
          <div class="stat-body">
            <span class="stat-value" id="statAvailable">0</span>
            <span class="stat-label">Available</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon stat-icon--sold"><i class="fas fa-shopping-bag"></i></div>
          <div class="stat-body">
            <span class="stat-value" id="statSold">0</span>
            <span class="stat-label">Sold</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon stat-icon--reserved"><i class="fas fa-clock"></i></div>
          <div class="stat-body">
            <span class="stat-value" id="statReserved">0</span>
            <span class="stat-label">Reserved</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon stat-icon--commission"><i class="fas fa-pen-ruler"></i></div>
          <div class="stat-body">
            <span class="stat-value" id="statCommission">0</span>
            <span class="stat-label">Commission</span>
          </div>
        </div>
      </section>

      <!-- View: Artworks Grid -->
      <section class="view-panel" id="viewArtworks">

        <!-- Filter Bar -->
        <div class="filter-bar">
          <div class="filter-group">
            <select id="statusFilter" class="filter-select">
              <option value="all">All Statuses</option>
              <option value="available">Available</option>
              <option value="reserved">Reserved</option>
              <option value="commission">Commission</option>
              <option value="sold">Sold</option>
            </select>
            <select id="segmentFilter" class="filter-select">
              <option value="all">All Segments</option>
              <option value="home">Home</option>
              <option value="business">Business</option>
              <option value="wellness">Wellness</option>
            </select>
            <select id="moodFilter" class="filter-select">
              <option value="all">All Moods</option>
              <option value="calm">Calm</option>
              <option value="energy">Energy</option>
              <option value="luxury">Luxury</option>
              <option value="focus">Focus</option>
              <option value="warmth">Warmth</option>
              <option value="balance">Balance</option>
              <option value="depth">Depth</option>
            </select>
          </div>
          <div class="filter-actions">
            <button class="btn btn-ghost btn-sm" id="selectAllVisible">
              <i class="fas fa-check-double"></i>
              <span>Select All</span>
            </button>
            <button class="btn btn-ghost btn-sm" id="clearSelection">
              <i class="fas fa-xmark"></i>
              <span>Clear</span>
            </button>
            <span class="selection-count" id="selectionCount" style="display:none;">0 selected</span>
          </div>
        </div>

        <!-- Artworks Grid (Masonry) -->
        <div class="artwork-grid" id="artworkGrid">
          <!-- Cards rendered by JS -->
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display:none;">
          <i class="fas fa-palette"></i>
          <h3>No artworks found</h3>
          <p>Try adjusting your filters or add a new artwork.</p>
        </div>
      </section>

      <!-- View: Cloudinary Media Library -->
      <section class="view-panel" id="viewCloudinary" style="display:none;">
        <div class="panel-header">
          <div>
            <h2>Media Library</h2>
            <p class="text-muted">Search and manage Cloudinary assets</p>
          </div>
          <span class="status-chip" id="cloudinaryStatusChip">
            <i class="fas fa-circle"></i>
            <span>Checking...</span>
          </span>
        </div>

        <div class="cloud-toolbar">
          <div class="cloud-search-row">
            <div class="search-input-wrap">
              <i class="fas fa-search"></i>
              <input type="search" id="cloudSearch" placeholder="Search by keyword or ID...">
            </div>
            <input type="text" id="cloudFolder" placeholder="Folder (optional)" class="cloud-filter-input">
            <input type="text" id="cloudTag" placeholder="Tag (optional)" class="cloud-filter-input">
            <button class="btn btn-primary btn-sm" id="cloudSearchBtn">
              <i class="fas fa-search"></i>
              Search
            </button>
            <button class="btn btn-ghost btn-sm" id="cloudClearBtn">
              Clear
            </button>
          </div>
        </div>

        <!-- Upload Zone -->
        <div class="upload-zone" id="uploadZone">
          <div class="upload-zone-inner">
            <i class="fas fa-cloud-arrow-up"></i>
            <p>Drag & drop image here or <label for="cloudFileInput" class="upload-link">browse</label></p>
            <input type="file" id="cloudFileInput" accept="image/*" class="sr-only">
            <div class="upload-options">
              <input type="text" id="uploadFolder" placeholder="Folder (optional)">
              <input type="text" id="uploadPublicId" placeholder="Public ID (optional)">
            </div>
            <button class="btn btn-primary btn-sm" id="uploadBtn" style="display:none;">
              <i class="fas fa-upload"></i>
              Upload
            </button>
            <div class="upload-progress" id="uploadProgress" style="display:none;">
              <div class="upload-progress-bar"></div>
            </div>
          </div>
        </div>

        <!-- Cloud Results Grid -->
        <div class="cloud-grid" id="cloudGrid">
          <!-- Rendered by JS -->
        </div>
        <button class="btn btn-ghost btn-full" id="cloudLoadMore" style="display:none;">
          Load More
        </button>
      </section>

      <!-- View: Batch Operations -->
      <section class="view-panel" id="viewBulk" style="display:none;">
        <div class="panel-header">
          <div>
            <h2>Batch Edit</h2>
            <p class="text-muted">Apply changes to multiple artworks at once</p>
          </div>
          <span class="selection-badge" id="bulkSelectionBadge">0 artworks selected</span>
        </div>

        <div class="bulk-form">
          <div class="bulk-section">
            <h3>Status & Pricing</h3>
            <div class="bulk-grid">
              <div class="form-field">
                <label>Status</label>
                <select id="bulkStatus">
                  <option value="">-- No change --</option>
                  <option value="available">Available</option>
                  <option value="reserved">Reserved</option>
                  <option value="commission">Commission</option>
                  <option value="sold">Sold</option>
                </select>
              </div>
              <div class="form-field">
                <label>Mood</label>
                <select id="bulkMood">
                  <option value="">-- No change --</option>
                  <option value="calm">Calm</option>
                  <option value="energy">Energy</option>
                  <option value="luxury">Luxury</option>
                  <option value="focus">Focus</option>
                  <option value="warmth">Warmth</option>
                  <option value="balance">Balance</option>
                  <option value="depth">Depth</option>
                </select>
              </div>
              <div class="form-field">
                <label>Price</label>
                <input type="number" id="bulkPrice" min="0" step="1" placeholder="New price...">
                <label class="check-label">
                  <input type="checkbox" id="bulkPriceClear">
                  <span>Clear price (show "On request")</span>
                </label>
              </div>
              <div class="form-field">
                <label>Currency</label>
                <select id="bulkCurrency">
                  <option value="">-- No change --</option>
                  <option value="EUR">EUR</option>
                  <option value="USD">USD</option>
                </select>
              </div>
            </div>
          </div>

          <div class="bulk-section">
            <h3>Segments</h3>
            <div class="bulk-segments-row">
              <select id="bulkSegmentsMode">
                <option value="replace">Replace</option>
                <option value="add">Add</option>
                <option value="remove">Remove</option>
              </select>
              <div class="chip-group" id="bulkSegmentChips">
                <label class="chip-toggle">
                  <input type="checkbox" value="home">
                  <span>Home</span>
                </label>
                <label class="chip-toggle">
                  <input type="checkbox" value="business">
                  <span>Business</span>
                </label>
                <label class="chip-toggle">
                  <input type="checkbox" value="wellness">
                  <span>Wellness</span>
                </label>
              </div>
            </div>
          </div>

          <div class="bulk-actions-bar">
            <button class="btn btn-primary" id="bulkApplyBtn" disabled>
              <i class="fas fa-check"></i>
              Apply to Selected
            </button>
            <button class="btn btn-danger" id="bulkDeleteBtn" disabled>
              <i class="fas fa-trash"></i>
              Delete Selected
            </button>
          </div>
        </div>
      </section>

    </main>

    <!-- Slide-over Editor Panel -->
    <div class="editor-overlay" id="editorOverlay"></div>
    <aside class="editor-panel" id="editorPanel">
      <div class="editor-topbar">
        <h2 id="editorTitle">New Artwork</h2>
        <div class="editor-topbar-actions">
          <button class="btn btn-ghost btn-sm" id="editorCloseBtn" title="Close (Esc)">
            <i class="fas fa-xmark"></i>
          </button>
        </div>
      </div>

      <form id="artworkForm" class="editor-form" autocomplete="off">
        <input type="hidden" id="artworkId" name="id">

        <!-- Image Section -->
        <div class="editor-section">
          <div class="editor-image-zone" id="editorDropZone">
            <img id="editorPreviewImg" class="editor-preview-img" alt="" style="display:none;">
            <div class="editor-drop-placeholder" id="editorDropPlaceholder">
              <i class="fas fa-image"></i>
              <p>Drop image URL or paste Cloudinary ID</p>
            </div>
          </div>
          <div class="editor-image-controls">
            <div class="form-field form-field--grow">
              <label>Cloudinary ID</label>
              <input type="text" name="cloudinary_id" id="editorCloudinaryId" placeholder="e.g. cjdam66bgapeypc6jbmk" required>
            </div>
            <button type="button" class="btn btn-ghost btn-icon" id="editorInspectBtn" title="Inspect in Cloudinary">
              <i class="fas fa-magnifying-glass"></i>
            </button>
            <button type="button" class="btn btn-ghost btn-icon" id="editorOpenCloudBtn" title="Open in browser">
              <i class="fas fa-arrow-up-right-from-square"></i>
            </button>
            <button type="button" class="btn btn-accent btn-icon" id="editorAutoFillBtn" title="Auto-fill from Cloudinary metadata">
              <i class="fas fa-wand-magic-sparkles"></i>
            </button>
          </div>
          <p class="text-muted text-xs" id="editorCloudMeta">Image metadata: --</p>
        </div>

        <!-- Status Quick Toggle -->
        <div class="editor-section">
          <label class="field-label">Status</label>
          <div class="status-toggle-group" id="statusToggleGroup">
            <button type="button" class="status-toggle" data-status="available">
              <i class="fas fa-check-circle"></i> Available
            </button>
            <button type="button" class="status-toggle" data-status="reserved">
              <i class="fas fa-clock"></i> Reserved
            </button>
            <button type="button" class="status-toggle" data-status="sold">
              <i class="fas fa-shopping-bag"></i> Sold
            </button>
            <button type="button" class="status-toggle" data-status="commission">
              <i class="fas fa-pen-ruler"></i> Commission
            </button>
          </div>
          <input type="hidden" name="status" id="editorStatus" value="available">
        </div>

        <!-- Titles (Tabbed) -->
        <div class="editor-section">
          <div class="lang-tabs">
            <button type="button" class="lang-tab active" data-lang="uk">UA</button>
            <button type="button" class="lang-tab" data-lang="en">EN</button>
            <button type="button" class="lang-tab" data-lang="de">DE</button>
          </div>
          <div class="lang-panels">
            <div class="lang-panel active" data-lang="uk">
              <div class="form-field">
                <label>Title (UA)</label>
                <input type="text" name="title_uk" required placeholder="Назва українською">
              </div>
              <div class="form-field">
                <label>Description (UA)</label>
                <textarea name="description_uk" rows="3" required placeholder="Опис українською"></textarea>
              </div>
              <div class="form-field">
                <label>Technique (UA)</label>
                <input type="text" name="technique_uk" placeholder="Акрил на полотні">
              </div>
            </div>
            <div class="lang-panel" data-lang="en">
              <div class="form-field">
                <label>Title (EN)</label>
                <input type="text" name="title_en" required placeholder="Title in English">
              </div>
              <div class="form-field">
                <label>Description (EN)</label>
                <textarea name="description_en" rows="3" required placeholder="Description in English"></textarea>
              </div>
              <div class="form-field">
                <label>Technique (EN)</label>
                <input type="text" name="technique_en" placeholder="Acrylic on canvas">
              </div>
            </div>
            <div class="lang-panel" data-lang="de">
              <div class="form-field">
                <label>Title (DE)</label>
                <input type="text" name="title_de" required placeholder="Titel auf Deutsch">
              </div>
              <div class="form-field">
                <label>Description (DE)</label>
                <textarea name="description_de" rows="3" required placeholder="Beschreibung auf Deutsch"></textarea>
              </div>
              <div class="form-field">
                <label>Technique (DE)</label>
                <input type="text" name="technique_de" placeholder="Acryl auf Leinwand">
              </div>
            </div>
          </div>
        </div>

        <!-- Price & Dimensions -->
        <div class="editor-section">
          <h3>Price & Dimensions</h3>
          <div class="form-row">
            <div class="form-field">
              <label>Price</label>
              <input type="number" name="price" min="0" step="1" placeholder="2800">
            </div>
            <div class="form-field">
              <label>Currency</label>
              <select name="currency">
                <option value="EUR">EUR</option>
                <option value="USD">USD</option>
              </select>
            </div>
          </div>
          <div class="form-row form-row--3">
            <div class="form-field">
              <label>Width (cm)</label>
              <input type="number" name="width_cm" id="editorWidth" min="1" step="1" required>
            </div>
            <div class="form-field">
              <label>Height (cm)</label>
              <input type="number" name="height_cm" id="editorHeight" min="1" step="1" required>
            </div>
            <div class="form-field">
              <label>Size string</label>
              <input type="text" name="size" id="editorSize" placeholder="120 x 80 cm">
            </div>
          </div>
          <p class="text-muted text-xs" id="editorRatioHint">Aspect ratio: --</p>
        </div>

        <!-- Categorization -->
        <div class="editor-section">
          <h3>Categorization</h3>
          <div class="form-field">
            <label>Mood</label>
            <div class="mood-select" id="moodSelect">
              <button type="button" class="mood-chip" data-mood="calm">Calm</button>
              <button type="button" class="mood-chip" data-mood="energy">Energy</button>
              <button type="button" class="mood-chip" data-mood="luxury">Luxury</button>
              <button type="button" class="mood-chip" data-mood="focus">Focus</button>
              <button type="button" class="mood-chip" data-mood="warmth">Warmth</button>
              <button type="button" class="mood-chip" data-mood="balance">Balance</button>
              <button type="button" class="mood-chip" data-mood="depth">Depth</button>
            </div>
            <input type="hidden" name="mood" id="editorMood" value="calm">
          </div>
          <div class="form-field">
            <label>Segments</label>
            <div class="chip-group">
              <label class="chip-toggle">
                <input type="checkbox" name="segments" value="home">
                <span>Home</span>
              </label>
              <label class="chip-toggle">
                <input type="checkbox" name="segments" value="business">
                <span>Business</span>
              </label>
              <label class="chip-toggle">
                <input type="checkbox" name="segments" value="wellness">
                <span>Wellness</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Save Actions -->
        <div class="editor-actions">
          <button type="submit" class="btn btn-primary btn-full" id="saveBtn">
            <i class="fas fa-save"></i>
            <span>Save Artwork</span>
            <kbd>Ctrl+S</kbd>
          </button>
          <div class="editor-secondary-actions">
            <button type="button" class="btn btn-ghost btn-sm" id="editorDuplicateBtn">
              <i class="fas fa-copy"></i> Duplicate
            </button>
            <button type="button" class="btn btn-danger-ghost btn-sm" id="editorDeleteBtn">
              <i class="fas fa-trash"></i> Delete
            </button>
          </div>
        </div>
      </form>
    </aside>

    <!-- Image Zoom Overlay -->
    <div class="zoom-overlay" id="zoomOverlay">
      <img id="zoomImage" alt="Zoomed preview">
      <button class="zoom-close" id="zoomClose"><i class="fas fa-xmark"></i></button>
    </div>

    <!-- Mobile Bottom Nav -->
    <nav class="bottom-nav" id="bottomNav">
      <button class="bottom-nav-item active" data-view="artworks">
        <i class="fas fa-palette"></i>
        <span>Artworks</span>
      </button>
      <button class="bottom-nav-item" data-view="cloudinary">
        <i class="fas fa-cloud"></i>
        <span>Media</span>
      </button>
      <button class="bottom-nav-item" data-view="bulk">
        <i class="fas fa-layer-group"></i>
        <span>Batch</span>
      </button>
      <button class="bottom-nav-item" id="mobileNewBtn">
        <i class="fas fa-plus-circle"></i>
        <span>New</span>
      </button>
    </nav>

  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Keyboard Shortcuts Help -->
  <div class="shortcuts-modal" id="shortcutsModal" style="display:none;">
    <div class="shortcuts-card">
      <div class="shortcuts-header">
        <h2>Keyboard Shortcuts</h2>
        <button class="btn btn-ghost btn-icon" id="shortcutsClose"><i class="fas fa-xmark"></i></button>
      </div>
      <div class="shortcuts-grid">
        <div class="shortcut-row"><kbd>Ctrl+K</kbd><span>Focus search</span></div>
        <div class="shortcut-row"><kbd>Ctrl+S</kbd><span>Save current artwork</span></div>
        <div class="shortcut-row"><kbd>Esc</kbd><span>Close editor / modal</span></div>
        <div class="shortcut-row"><kbd>Ctrl+N</kbd><span>New artwork</span></div>
        <div class="shortcut-row"><kbd>Ctrl+D</kbd><span>Toggle dark mode</span></div>
        <div class="shortcut-row"><kbd>?</kbd><span>Show this help</span></div>
      </div>
    </div>
  </div>

  <script src="js/admin-app.js"></script>
</body>
</html>
